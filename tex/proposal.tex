\section{提案手法}
\label{sec:proposal}
知識ベースに対するプロパティ指向のファセット検索システムとして，図~\ref{fig:architecture} のシステム概要を提案する．プロパティ指向のファセット検索システムの目的は，興味に関してキーワード検索して得たトリプルの集合に対して，エンティティ間の関係性を示すプロパティに関するファセットを整備することで，関係性に基づいてエンティティの集合（トリプルの集合）を検索できるようにすることである．ユーザの操作とシステムで実行される処理は次の通りである．
\begin{enumerate}
	\item ユーザはキーワード検索を実行する．システムは，キーワードをエンティティのドキュメントに含むエンティティについて，それらが主語または目的語に位置付けられているトリプル集合を主語あるいは目的語のランク値降順で返却する．また，返却したトリプル集合に含まれる主語，述語，目的語についてファセットを提示する．
	\item ユーザはファセットから探索したいファセットキーを選択する．システムは，選択されたファセットキーに対応するトリプル集合を返却する．
\end{enumerate}

本システムのポイントは，プロパティに関するファセットのような元の知識ベースには存在しないファセットの生成を可能とするために，知識ベースから独立して関係データベースを設計することにある．以降で，RDFデータベース，エンティティデータベース，トリプルデータベース，ファセットデータベースを説明し，最後にプロトタイプシステムである``ProFacet''のユーザーインターフェースについて説明する．
%
\begin{figure}[h]
\centering
\includegraphics[width=3in]{image/architecture.png}
\caption{\small
システム概要
}
\label{fig:architecture}
\end{figure}
%
\subsection{RDFデータベース}
RDFデータベースは，キーワード検索とファセット検索に必要となる知識ベースのデータを格納する．本稿では，検索結果として返却されるRDFデータと検索対象となるドキュメント化されたエンティティを生成するためのRDFデータの２種類を使用する．また，検索結果として返却されるRDFデータは，エンティティのランク値の計算とファセット生成のためのクラスタリング においても使用される．
%
\subsection{エンティティデータベース}
エンティティデータベースは，エンティティを主キーとして，検索対象のドキュメント化されたエンティティ，ランク値をタプルとしたテーブルを持つ．エンティティのランク値は，検索結果として返却されるRDFデータの主語と目的語のエンティティに対して，PageRankのアルゴリズムによって計算する．この時，PageRankは，複数種類のエッジには対応しないため，元のRDFデータが持つ複数種類のプロパティの区別は行なっていない．そして，ドキュメント化されたエンティティを生成するためのRDFデータに対して，主語のエンティティと目的語のリテラルを1つのドキュメントとする処理を行う．これら2つの処理の結果を合わせて，エンティティ，ドキュメント化エンティティ，ランク値をタプルとしたエンティティテーブルを作成する．
%
\subsection{トリプルデータベース}
クラスタリング 対象のプロパティが述語であるトリプルをタプルとしたテーブルを持つ．インターフェースの検索結果には，このテーブルのタプルが表示される．
%
\subsection{ファセットデータベース}
ファセットデータベースは，エンティティに関するファセットやプロパティに関するファセットのテーブルと，各ファセットのキー名称を管理するテーブル``ファセットキー''を持つ．図~\ref{fig:architecture} では，プロパティに関するファセットを例示している．ファセットのテーブルは，ファセットの種類を示す番号，ファセットの内容を示すキー，エンティティやプロパティのURIをタプルとして持つ．ファセットキーは，ファセットの種類を示す番号，ファセットキー，キーの内容を示すラベルをタプルとして持つ．ファセットの種類を示す番号は，ファセットの種類の拡張に対応するためである．また，ファセットキーは，エンティティやプロパティのクラスタ番号に該当する．本稿では，プロパティファセットを群平均法による階層型クラスタリング によって生成した．プロパティ間の距離は，Jaccard係数を変換したJaccard距離である．Jaccard係数は2つの集合に含まれる要素のうち，共通要素が占める割合を示す．ここでは，各プロパティの主語に関するJaccard係数と目的語に関するJaccard係数の平均値をプロパティ間のJaccard係数とした．この手法を適用した理由として，プロパティはエンティティとエンティティ（またはリテラル）の関係性として機能するため，主語や目的語を共有するという観点でプロパティを整理することができると考えたからである．別の方法として，RDFスキーマ\footnote{https://www.w3.org/TR/rdf-schema}\ に基づくプロパティの階層構造を示すプロパティである``subPropertyOf''の利用や，プロパティの主語や目的語に期待されるエンティティのクラスを示すプロパティである``domain''，``range''なども考えられるが，あくまでも期待値であるため，実際のデータに基づいてクラスタリング を行うことが有効と考えた．
%
\subsection{ユーザーインターフェース}
プロパティ指向のファセット検索システム``ProFacet''のプロトタイプを実装した．そのユーザーインタフェースを図~\ref{fig:profacetInterface} に示す．Aのように，ユーザは検索キーワードやURIを入力し，主語あるいは目的語のエンティティに対して検索を実行する．検索結果はDのように主語，述語，目的語のトリプルのタプルで表示される．また，BはTransition Markerとして，Dの検索結果に対応するファセットを表示する．プロトタイプシステムでは，主語と目的語のエンティティのファセット（Subject Type, Object Type）に各エンティティのクラス情報を，述語のプロパティのファセット（Predicate Type）には上述したクラスタリング 結果を整備した．Cは，Intensionとして検索の状態を示している．

\begin{figure}[h]
\centering
\includegraphics[width=3.3in]{image/profacetInterface.png}
\caption{\small
ユーザーインターフェース
}
\label{fig:profacetInterface}
\end{figure}
